<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <ui:decorate template="/tema/padrao.xhtml">
        <ui:define  name="centro">
            <h:form id="form3">
                <p:growl id="growl3" showDetail="true" sticky="false" life="3000"/>
                <p:panel id="cadastrarLivro" header="Cadastrar Acervo">
                    <p:panel id="dadoslivros" header="Dados do Livro">
                        <h:inputHidden value="#{livroMB.livro.id}"/>
                        <p:panelGrid  columns="2" styleClass="semBorda">
                            Titulo: <p:inputText value="#{livroMB.livro.titulo}" required="true" requiredMessage="Campo Titulo Obrigatório"/>
                            ISBN: <p:inputText value="#{livroMB.livro.isbn}" required="true" requiredMessage="Campo ISBN Obrigatório" />
                            Área de Conhecimento: <p:inputText value="#{livroMB.livro.area_conhecimento}" required="true" requiredMessage="Campo Área de Conhecimento Obrigatório" />
                            Categoria: <p:selectOneMenu id="prioridade" value="#{livroMB.livro.categoria}" effect="fade">
                                <f:selectItem itemLabel= "Livro" itemValue="Livro"/>
                                <f:selectItem itemLabel= "Artigo" itemValue="Artigo"/>
                                <f:selectItem itemLabel= "TCC/Monografia" itemValue="TCC/Monografia"/>
                            </p:selectOneMenu>
                            Autor: <p:inputText value="#{livroMB.livro.autor}" required="true" requiredMessage="Campo Autor Obrigatório"/>
                            Ano de Lançamento: <p:inputMask mask="9999" value="#{livroMB.livro.ano_lancamento}" required="true" requiredMessage="Campo Ano de Lançamento Obrigatório"/>
                            <h:outputLabel for="basic" value="Quantidade de Exemplar: " />
                            <p:spinner id="basic" value="#{livroMB.numero}" min="1"/>
                            <p:outputLabel for="editora" value="Editora: " />
                            <p:selectOneMenu id="editora" value="#{livroMB.editora}" effect="fade" converter="editora">
                                <f:selectItems value="#{livroMB.editoras}" var="editora" itemLabel="#{editora.nome}" itemValue="#{editora}" />
                            </p:selectOneMenu>
                        </p:panelGrid>
                    </p:panel>
                    <div align="center">
                        <p:commandButton value="Salvar" ajax="false" oncomplete="PF('dialog').show()" update="form3" action="#{livroMB.novoLivro()}"/>
                        <p:commandButton value="Alterar" ajax="false" oncomplete="PF('dialog').show()" update="form3" action="#{livroMB.alterarLivro()}"/>
                        <p:commandButton value="Excluir" ajax="false" oncomplete="PF('dialog').show()" update="form3" action="#{livroMB.excluirLivro()}"/>
                    </div>
                </p:panel>
                <p:dataTable id="tabelaLivros" value="#{livroMB.livros}" emptyMessage="Não há registros" var="livro" paginator="true" rows="5"
                             selectionMode="single" rowKey="#{livro.id}"> 
                    <p:column headerText="Id"> 
                        <h:outputText value="#{livro.id}"/> 
                    </p:column> 
                    <p:column headerText="ISBN" filterBy="#{livro.isbn}" filterMatchMode="contains"> 
                        <h:outputText value="#{livro.isbn}"/> 
                    </p:column> 
                    <p:column headerText="Titulo" filterBy="#{livro.titulo}" filterMatchMode="contains"> 
                        <h:outputText value="#{livro.titulo}"/> 
                    </p:column> 
                    <p:column headerText="Autor" filterBy="#{livro.autor}" filterMatchMode="contains"> 
                        <h:outputText value="#{livro.autor}"/> 
                    </p:column> 
                    <p:column headerText="Área de Conhecimento" filterBy="#{livro.area_conhecimento}" filterMatchMode="contains"> 
                        <h:outputText value="#{livro.area_conhecimento}"/> 
                    </p:column>
                    <p:ajax event="rowSelect" update=":form3:cadastrarLivro" listener="#{livroMB.onRowSelect}"/>
                </p:dataTable> 
            </h:form>
        </ui:define>
    </ui:decorate>
</html>

